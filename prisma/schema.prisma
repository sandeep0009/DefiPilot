

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = "file:../database.db"
}



model User{
  id            String        @id @default(uuid())
  teleUserId    String
  wallet        Wallets[]
  rules         Rules[]
  logs          Logs[]
  createAt      DateTime
}


model Rules{
  id              String          @id @default(uuid())
  userId          String
  walletId        String
  action          RuleType
  condidtion      ConditionType
  status          StatusType
  user            User            @relation(fields: [userId] ,references: [id])
  createAt        DateTime


  @@index([userId])
}

model Wallets{
  id                  String          @id @default(uuid())
  publicAddress       String
  userId              String
  user                User            @relation(fields: [userId],references: [id])
  createAt            DateTime       
}


model Logs{
  id              String          @id @default(uuid())
  txnHash         String
  logsstatus      LogsType 
  gas             Float  
  userId          String
  user            User           @relation(fields: [userId],references: [id]) 
  createAt        DateTime


  @@index([userId])
}
enum RuleType{
  swap
  transfer
  alert

}

enum ConditionType{
  priceThreshold
  timeSchedule
  eventTrigger
}



enum StatusType{
  active 
  paused
  failed
}


enum LogsType{
  failure
  successfull

}